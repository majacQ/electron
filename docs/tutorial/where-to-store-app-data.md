# Where to Store App Data

This tutorial provides guidance on where to store user data properly depending
on the data's type.

## User data paths

In Electron, paths to special directories can be obtained and customized with the
`app.getPath` and `app.setPath` APIs, respectively. There are 3 paths that are used
most commonly to store user data: `userData`, `localUserData`, and `userCache`.

### `userData`

The `userData` path is where app should store persistent user data, such as
config files and authentication information. Generally you should not write
large files in this location as some environments may choose to synchronize
files in this location to cloud, especially on Windows.

By default, it points to:

* `%APPDATA%/AppName` on Windows
* `$XDG_CONFIG_HOME/AppName` or `~/.config/AppName` on Linux
* `~/Library/Application Support/AppName` on macOS

### `localUserData`

On Windows, `localUserData` points to `%LOCALAPPDATA%/AppName`. Both
`localUserData` and `userData` can be used to store persistent user data.
The difference between them is that  `userData` can be synchronized to
the cloud, but `localUserData` cannot.

As a rule of thumb, if some user data takes lots of disk space, it should be written
to `localUserData`. Otherwise, it should instead be written to `userData`.

On Linux and macOS, `localUserData` has no distinctive purpose and is just an alias
to `userData`.

### `userCache`

The `userCache` path is where cache data should be stored. Files in this
location should be safe to be removed without affecting your app's state.

* On Linux, it points to `$XDG_CACHE_HOME/AppName` or `~/.cache/AppName`.
* On macOS, it points to `~/Library/Caches/AppName`.
* On Windows, there is no specialized location to store cache data, and most apps
write cache data to `%LOCALAPPDATA%`, so this path points to `localUserData` by
default. If your app is writing files to both `localUserData` and `userCache`,
you should consider changing the `userCache` path to a subdirectory of
`localUserData` to avoid conflicts.

## Data in Electron apps

Data generated by a typical Electron app can be categorized to 3 kinds:

1. Browsing data created by `Session` API, which in most apps are generated
   implicitly when using the `BrowserWindow` API. They can be roughly separated
   in 2 kinds:
   1. HTTP disk cache and JavaScript code cache. They are written into the
      `sessionCache` directory, which points to `userData` by default.
   1. All other kinds of browsing data, such as cookies, localStorage, indexDB,
      GPU Cache, and dictionaries. They are all considered as browsing data in
      Chromium and written into the `sessionData` directory, which points to
      `userData` by default.
1. Data implicitly written by other Electron APIs, such as crash reports written
   by the `crashReporter` module, or lock file written by the
   `app.requestSingleInstanceLock` API. They are written to the `userData`
   directory by default.
1. Data generated by Electron apps themselves. It is developer's decision to
   choose where to write them.

## Choose a better location for browsing data

For historical reasons, the locations of browsing data and cache (`sessionData`
and `sessionCache`) point to `userData` by default. This causes problems for
apps that open remote websites with `BrowserWindow`, because disk spaces used by
`sessionData` and `sessionCache` could increase quickly and users would get a
very large `userData` directory, which is annoying for users who synchronize the
content of `userData` to cloud.

So for new apps you should change `sessionCache` to `userCache` to avoid
polluting `userCache` directory with cache data.

```javascript
app.setPath('sessionCache', app.getPath('userCache'))
```

As for `sessionData`, for apps that rely on browser storage like cookies and
localStorage to store user data, it is recommended to change `sessionData` to
`localUserData`, to comply with user data conventions on Windows.

```javascript
app.setPath('sessionData', app.getPath('localUserData'))
```

And for apps that don't store any user data inside browser, it is recommended
to change `sessionData` to `userCache` to keep `userData` directory clean.

```javascript
app.setPath('sessionData', app.getPath('userCache'))
```
